
# 1. network-observability pods CPU usage
- query: pod:container_cpu_usage:sum{namespace="network-observability"}
  metricName: cpuUsage

# 2. network-observability pods memory usage
- query: sum(container_memory_working_set_bytes{namespace="network-observability",container="",}) by (container, pod, namespace, node )
  metricName: memoryUsage

# 3. network-observability pods memory usage (Working Set)
- query: sum(container_memory_working_set_bytes{namespace="network-observability",container="",}) by (container, pod, namespace, node )
  metricName: memoryUsageWorkingSet

# 4. network-observability pods memory usage (RSS)
- query: sum(container_memory_rss{namespace="network-observability",container="",}) by (container, pod, namespace, node )
  metricName: memoryUsageRSS

# 5. Number of flows processed by ingester per minute aggregated by FLP pods.
- query: sum(rate(ingest_collector_flow_logs_processed[1m])*60) by (pod)
  metricName: nFlowsProcessedPerMinute

# 6. loki-store PVC usage averaging over 5 mins period
- query: sum by (persistentvolumeclaim) (avg_over_time(kubelet_volume_stats_used_bytes{namespace="openshift-operators-redhat"}[5m]))
  metricName: lokiStorageUsage

# 7. Number of bytes processed per minute.
- query: sum(rate(netobserv_bandwidth_per_network_service_per_namespace[1m]))
metricName: nBytesProcessedPerMinute

# 8. Number of Loki records written per minute.
- query: sum(loki_records_written)
metricName: lokiRecordsWritten

