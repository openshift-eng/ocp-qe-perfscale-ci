
# 1. netobserv pods CPU usage
- query: pod:container_cpu_usage:sum{namespace="netobserv"} * on (pod) group_left(node) kube_pod_info{namespace="netobserv", pod_ip!=""}
  metricName: cpuUsage

# 2. eBPF pods CPU usage
- query: pod:container_cpu_usage:sum{namespace="netobserv-privileged"} * on (pod) group_left(node) kube_pod_info{namespace="netobserv-privileged", pod_ip!=""}
  metricName: ebpfCpuUsage

# 3. netobserv pods memory usage (Working Set)
- query: sum(container_memory_working_set_bytes{namespace="netobserv",container="",}) by (container, pod, namespace, node )
  metricName: memoryUsageWorkingSet

# 4. netobserv pods memory usage (RSS)
- query: sum(container_memory_rss{namespace="netobserv",container="",}) by (container, pod, namespace, node )
  metricName: memoryUsageRSS

# 5. eBPF pods memory usage (RSS)
- query: sum(container_memory_rss{namespace="netobserv-privileged",container="",}) by (container, pod, namespace, node )
  metricName: ebpfMemoryUsageRSS

# 6. eBPF pods memory usage (Working Set)
- query: sum(container_memory_working_set_bytes{namespace="netobserv-privileged",container="",}) by (container, pod, namespace, node )
  metricName: ebpfMemoryUsageWorkingSet

# 7. lokistack PVC usage averaging over 5 mins period
- query: sum by (persistentvolumeclaim) (avg_over_time(kubelet_volume_stats_used_bytes{namespace="openshift-operators-redhat"}[5m]))
  metricName: lokiStorageUsage

# 8. Flows processed by ingester per minute aggregated by FLP pods.
- query: sum(rate(netobserv_ingest_flows_processed[1m])*60) by (pod) * on (pod) group_left(node) kube_pod_info{namespace="netobserv", pod_ip!=""}
  metricName: nFlowsProcessedPerMinute

# 9. Ingress bytes processed per minute
- query: sum(rate(netobserv_workload_ingress_bytes_total[1m])*60)
  metricName: nBytesProcessedPerMinute

# 10. Ingress packets processed per minute.
- query: sum(rate(netobserv_workload_ingress_packets_total[1m])*60)
  metricName: nPacketsProcessedPerMinute

# 11. Loki records written per minute.
- query: sum(netobserv_records_written)
  metricName: lokiRecordsWritten
  